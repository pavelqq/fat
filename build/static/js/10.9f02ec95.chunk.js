(this.webpackJsonpfat=this.webpackJsonpfat||[]).push([[10],{1721:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return Ie}));var c=t(17),n=t(34),s=t(0),r=t(3),i=t(576),o=t(81),l=t(75),j=t(182),d=t(7),b=t(12),O=t(441),m=t(443),h=t(456),x=t(374),u=t(430),p=t(433),f=t(145),g=t.n(f),v=t(25),N=t(9),y=t.n(N),w=t(4),k=t(434),C=t(435),I=t(560),U=t(436),R=t(57),T=t(61),B=t(1),L=["active","conversation","className"],S=Object(i.a)((function(e){return{active:{boxShadow:"inset 4px 0px 0px ".concat(e.palette.primary.main),backgroundColor:w.a.grey[50]},avatar:{height:40,width:40},details:{marginLeft:e.spacing(2),display:"flex",flexDirection:"column",alignItems:"flex-end"},unread:{marginTop:2,padding:2,height:18,minWidth:18}}})),W=function(e){var a=e.active,t=e.conversation,n=e.className,s=Object(b.a)(e,L),i=S(),o=t.messages[t.messages.length-1];return Object(B.jsxs)(k.a,Object(d.a)(Object(d.a)({},s),{},{button:!0,className:Object(r.default)(Object(c.a)({},i.active,a),n),component:v.b,to:"/chat/".concat(t.id),children:[Object(B.jsx)(C.a,{children:Object(B.jsx)(I.a,{alt:"\u0410\u0432\u0430",className:i.avatar,src:t.otherUser.avatar})}),Object(B.jsx)(U.a,{primary:t.otherUser.name,primaryTypographyProps:{noWrap:!0,variant:"h6"},secondary:"".concat(o.sender.name,": ").concat(o.content),secondaryTypographyProps:{noWrap:!0,variant:"body1"}}),Object(B.jsxs)("div",{className:i.details,children:[Object(B.jsx)(R.a,{noWrap:!0,variant:"body2",children:y()(o.created_at).isSame(y()(),"day")?y()(o.created_at).format("LT"):y()(o.created_at).fromNow()}),t.unread>0&&Object(B.jsx)(T.a,{className:i.unread,color:w.a.red[500],shape:"rounded",children:t.unread})]})]}))},_=["conversations","className"],G=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.white},searchInput:{flexGrow:1}}})),D=function(e){var a=e.conversations,t=e.className,c=Object(b.a)(e,_),n=G(),s=Object(l.a)().match.params.id;return Object(B.jsxs)("div",Object(d.a)(Object(d.a)({},c),{},{className:Object(r.default)(n.root,t),children:[Object(B.jsxs)(O.a,{children:[Object(B.jsx)(m.a,{className:n.searchInput,disableUnderline:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a\u043e\u0432 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432"}),Object(B.jsx)(h.a,{title:"\u041f\u043e\u0438\u0441\u043a",children:Object(B.jsx)(x.a,{edge:"end",children:Object(B.jsx)(g.a,{})})})]}),Object(B.jsx)(u.a,{}),Object(B.jsx)(p.a,{disablePadding:!0,children:a.map((function(e,t){return Object(B.jsx)(W,{active:e.id===s,conversation:e,divider:t<a.length-1},e.id)}))})]}))},P=t(96),$=t(566),A=t(564),E=t(445),J=t(1155),X=t.n(J),z=t(1156),F=t.n(z),H=t(758),M=t.n(H),q=t(1157),K=t.n(q),Q=t(710),V=t.n(Q),Y=t(399),Z=["conversation","className"],ee=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.white},backButton:{marginRight:e.spacing(2),"@media (min-width: 864px)":{display:"none"}},user:{flexShrink:0,flexGrow:1},activity:{display:"flex",alignItems:"center"},statusBullet:{marginRight:e.spacing(1)},search:Object(c.a)({height:42,padding:e.spacing(0,2),display:"flex",alignItems:"center",flexBasis:300,marginLeft:"auto"},e.breakpoints.down("sm"),{flex:"1 1 auto"}),searchIcon:{marginRight:e.spacing(2),color:e.palette.icon},searchInput:{flexGrow:1}}})),ae=function(e){var a=e.conversation,t=e.className,c=Object(b.a)(e,Z),i=ee(),o=Object(s.useRef)(null),l=Object(s.useState)(!1),j=Object(n.a)(l,2),u=j[0],p=j[1];return Object(B.jsxs)(O.a,Object(d.a)(Object(d.a)({},c),{},{className:Object(r.default)(i.root,t),children:[Object(B.jsx)(h.a,{title:"\u041d\u0430\u0437\u0430\u0434",children:Object(B.jsx)(x.a,{className:i.backButton,component:v.b,edge:"start",to:"/chat",children:Object(B.jsx)(X.a,{})})}),Object(B.jsxs)("div",{className:i.user,children:[Object(B.jsx)(R.a,{variant:"h6",children:a.otherUser.name}),Object(B.jsx)("div",{className:i.activity,children:a.otherUser.active?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Y.a,{className:i.statusBullet,color:"success",size:"small"}),Object(B.jsx)(R.a,{variant:"body2",children:"\u0421\u0435\u0439\u0447\u0430\u0441 \u043e\u043d\u043b\u0430\u0439\u043d"})]}):Object(B.jsxs)(R.a,{variant:"body2",children:["Active ",y()(a.otherUser.lastActivity).fromNow()]})})]}),Object(B.jsxs)(P.a,{className:i.search,elevation:1,children:[Object(B.jsx)(g.a,{className:i.searchIcon}),Object(B.jsx)(m.a,{className:i.searchInput,disableUnderline:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u0438\u0430\u043b\u043e\u0433\u0443"})]}),Object(B.jsx)(h.a,{title:"\u0411\u043e\u043b\u044c\u0448\u0435",children:Object(B.jsx)(x.a,{onClick:function(){p(!0)},ref:o,children:Object(B.jsx)(V.a,{})})}),Object(B.jsxs)($.a,{anchorEl:o.current,keepMounted:!0,onClose:function(){p(!1)},open:u,children:[Object(B.jsxs)(A.a,{children:[Object(B.jsx)(E.a,{children:Object(B.jsx)(F.a,{})}),Object(B.jsx)(U.a,{primary:"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})]}),Object(B.jsxs)(A.a,{children:[Object(B.jsx)(E.a,{children:Object(B.jsx)(M.a,{})}),Object(B.jsx)(U.a,{primary:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})]}),Object(B.jsxs)(A.a,{children:[Object(B.jsx)(E.a,{children:Object(B.jsx)(K.a,{})}),Object(B.jsx)(U.a,{primary:"\u041e\u0442\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"})]})]})]}))},te=t(147),ce=t.n(te),ne=t(431),se=["message","className"],re=Object(i.a)((function(e){return{root:{marginBottom:e.spacing(2)},authUser:{display:"flex",justifyContent:"flex-end","& $body":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}},inner:{display:"flex",maxWidth:500},avatar:{marginRight:e.spacing(2)},body:{backgroundColor:w.a.grey[200],color:e.palette.text.primary,borderRadius:e.shape.borderRadius,padding:e.spacing(1,2)},content:{marginTop:e.spacing(1)},image:{marginTop:e.spacing(2),height:"auto",width:380,maxWidth:"100%"},footer:{marginTop:e.spacing(1),display:"flex",justifyContent:"flex-end"}}})),ie=function(e){var a=e.message,t=e.className,n=Object(b.a)(e,se),s=re();return Object(B.jsx)("div",Object(d.a)(Object(d.a)({},n),{},{className:Object(r.default)(s.root,Object(c.a)({},s.authUser,a.sender.authUser),t),children:Object(B.jsxs)("div",{className:s.inner,children:[Object(B.jsx)(I.a,{className:s.avatar,component:v.b,src:a.sender.avatar,to:"/profile/1/timeline"}),Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{className:s.body,children:[Object(B.jsx)("div",{children:Object(B.jsx)(ne.a,{color:"inherit",component:v.b,to:"/profile/1/timeline",variant:"h6",children:(a.sender.authUser,a.sender.name)})}),Object(B.jsx)("div",{className:s.content,children:"image"===a.contentType?Object(B.jsx)("img",{alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",className:s.image,src:a.content}):Object(B.jsx)(R.a,{color:"inherit",variant:"body1",children:a.content})})]}),Object(B.jsx)("div",{className:s.footer,children:Object(B.jsx)(R.a,{className:s.time,variant:"body2",children:y()(a.created_at).fromNow()})})]})]})}))},oe=["messages","className"],le=Object(i.a)((function(e){return{root:{flexGrow:1,overflow:"hidden",maxHeight:"100%"},inner:{padding:e.spacing(2)}}})),je=function(e){var a=e.messages,t=e.className,c=Object(b.a)(e,oe),n=le();return Object(B.jsx)("div",Object(d.a)(Object(d.a)({},c),{},{className:Object(r.default)(n.root,t),children:Object(B.jsx)(ce.a,{children:Object(B.jsx)("div",{className:n.inner,children:a.map((function(e){return Object(B.jsx)(ie,{message:e},e.id)}))})})}))},de=t(233),be=t.n(de),Oe=t(759),me=t.n(Oe),he=t(786),xe=t.n(he),ue=["className"],pe=Object(i.a)((function(e){return{root:{backgroundColor:e.palette.white,display:"flex",alignItems:"center",padding:e.spacing(1,2)},paper:{flexGrow:1,marginLeft:e.spacing(2),padding:e.spacing(.5,2)},input:{width:"100%"},divider:{width:1,height:24},fileInput:{display:"none"}}})),fe=function(e){var a=e.className,t=Object(b.a)(e,ue),c=pe(),i=Object(s.useRef)(null),o=Object(s.useState)(""),l=Object(n.a)(o,2),j=l[0],O=l[1],p=function(){i.current.click()};return Object(B.jsxs)("div",Object(d.a)(Object(d.a)({},t),{},{className:Object(r.default)(c.root,a),children:[Object(B.jsx)(I.a,{alt:"Person",src:"/images/avatars/avatar_11.png"}),Object(B.jsx)(P.a,{className:c.paper,elevation:1,children:Object(B.jsx)(m.a,{className:c.input,disableUnderline:!0,onChange:function(e){e.persist(),O(e.target.value)},placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c..."})}),Object(B.jsx)(h.a,{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",children:Object(B.jsx)(x.a,{color:j.length>0?"primary":"default",children:Object(B.jsx)(be.a,{})})}),Object(B.jsx)(u.a,{className:c.divider}),Object(B.jsx)(h.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0444\u043e\u0442\u043e",children:Object(B.jsx)(x.a,{edge:"end",onClick:p,children:Object(B.jsx)(me.a,{})})}),Object(B.jsx)(h.a,{title:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0444\u0430\u0439\u043b",children:Object(B.jsx)(x.a,{edge:"end",onClick:p,children:Object(B.jsx)(xe.a,{})})}),Object(B.jsx)("input",{className:c.fileInput,ref:i,type:"file"})]}))},ge=["conversation","className"],ve=Object(i.a)((function(e){return{root:{display:"flex",flexDirection:"column",backgroundColor:e.palette.white}}})),Ne=function(e){var a=e.conversation,t=e.className,c=Object(b.a)(e,ge),n=ve();return Object(B.jsxs)("div",Object(d.a)(Object(d.a)({},c),{},{className:Object(r.default)(n.root,t),children:[Object(B.jsx)(ae,{conversation:a}),Object(B.jsx)(u.a,{}),Object(B.jsx)(je,{messages:a.messages}),Object(B.jsx)(u.a,{}),Object(B.jsx)(fe,{})]}))},ye=["className"],we=Object(i.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center"},inner:{textAlign:"center"},image:{maxWidth:400},title:{margin:e.spacing(4,0,1,0)}}})),ke=function(e){var a=e.className,t=Object(b.a)(e,ye),c=we();return Object(B.jsx)("div",Object(d.a)(Object(d.a)({},t),{},{className:Object(r.default)(c.root,a),children:Object(B.jsxs)("div",{className:c.inner,children:[Object(B.jsx)("img",{alt:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433",className:c.image,src:"/images/undraw_work_chat_erdt.svg"}),Object(B.jsx)(R.a,{className:c.title,variant:"h4",children:"\u0412\u0430\u0448\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(B.jsx)(R.a,{variant:"subtitle1",children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433 \u0441\u043b\u0435\u0432\u0430, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0443"})]})}))},Ce=Object(i.a)((function(e){return{root:{height:"100%",display:"flex","@media (max-width: 863px)":{"& $conversationList, & $conversationDetails":{flexBasis:"100%",width:"100%",maxWidth:"none",flexShrink:"0",transform:"translateX(0)"}}},openConversion:{"@media (max-width: 863px)":{"& $conversationList, & $conversationDetails":{transform:"translateX(-100%)"}}},conversationList:{width:300,flexBasis:300,flexShrink:0,"@media (min-width: 864px)":{borderRight:"1px solid ".concat(e.palette.divider)}},conversationDetails:{flexGrow:1},conversationPlaceholder:{flexGrow:1}}})),Ie=function(){var e,a,t=Ce(),i=Object(l.a)(),d=Object(s.useState)([]),b=Object(n.a)(d,2),O=b[0],m=b[1];return Object(s.useEffect)((function(){var e=!0;return o.a.get("/api/chat/conversations").then((function(a){e&&m(a.data.conversations)})),function(){e=!1}}),[]),i.match.params.id&&(a=O.find((function(e){return e.id===i.match.params.id}))),Object(B.jsxs)(j.a,{className:Object(r.default)((e={},Object(c.a)(e,t.root,!0),Object(c.a)(e,t.openConversion,a),e)),title:"\u0427\u0430\u0442\u044b",children:[Object(B.jsx)(D,{className:t.conversationList,conversations:O}),a?Object(B.jsx)(Ne,{className:t.conversationDetails,conversation:a}):Object(B.jsx)(ke,{className:t.conversationPlaceholder})]})}}}]);
//# sourceMappingURL=10.9f02ec95.chunk.js.map